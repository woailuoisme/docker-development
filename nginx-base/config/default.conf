    # 4. 本地性能测试服务器 (Default Server)
    server {
        listen 80 default_server reuseport;
        server_name _;

        # 显式启用访问日志输出到标准输出
        access_log /dev/stdout main;
        error_log  /dev/stderr warn;

        # 引入安全加固配置
        include waf.conf;

        location / {
            root   /usr/share/nginx/html;
            index  index.html;
            
            # 开启强缓存测试静态资源
            expires 1d;
        }

        # 1. 允许 .well-known 路径访问（SSL 校验、App 关联等），但静默处理 404 噪音
        location /.well-known/ {
            root /usr/share/nginx/html;
            log_not_found off;
            access_log off;
            allow all;
        }

        # 2. 禁止访问所有其他隐藏文件 (.git, .env, .htaccess 等)
        location ~ /\.(?!well-known).* {
            deny all;
            access_log off;
            log_not_found off;
        }

        # 模拟 API 响应
        location /api/test {
            default_type application/json;
            return 200 '{"status":"success","message":"High performance Nginx is ready","engine":"Zstd/Brotli/Reuseport"}';
        }

        # 存根状态监控
        location /stub_status {
            stub_status on;
            access_log off;
            allow 127.0.0.1;
            allow 172.16.0.0/12;
            allow 192.168.0.0/16;
            deny all;
        }
    }
