# ============================================
# Nginx SSL & HTTP/1.1, 2, 3 (QUIC) 整合配置
# 整合自 ssl.conf, http3.conf, common-server.conf
# ============================================

# 1. 监听配置 (启用 HTTP/1.1, 2, 3)
# 注意：reuseport 只能在所有 server 块中定义一次，通常定义在默认 server 或第一个 server 中
listen 443 ssl;
listen 443 quic reuseport;
http2 on;

# 2. 证书路径
ssl_certificate /etc/nginx/ssl/live/haoxiaoguai.xyz/fullchain.pem;
ssl_certificate_key /etc/nginx/ssl/live/haoxiaoguai.xyz/privkey.pem;

# 3. HTTP/3 响应头 (告知浏览器支持 QUIC)
add_header Alt-Svc 'h3=":443"; ma=86400';

# 4. 基础安全与 WAF 引入
include /etc/nginx/snippets/security-headers.conf;
include /etc/nginx/snippets/waf.conf;

# 5. 优化建议
# SSL 会话缓存等全局配置建议保持在 nginx.conf 中
